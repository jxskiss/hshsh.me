<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linux on hshsh&#39;s little site</title>
    <link>http://hshsh.me/tags/linux/</link>
    <description>Recent content in Linux on hshsh&#39;s little site</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 30 Jul 2016 07:30:00 +0800</lastBuildDate>
    <atom:link href="http://hshsh.me/tags/linux/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>遭遇时间不同步引起的BUG</title>
      <link>http://hshsh.me/post/2016-07-30-fix-bug-caused-by-un-synced-time/</link>
      <pubDate>Sat, 30 Jul 2016 07:30:00 +0800</pubDate>
      
      <guid>http://hshsh.me/post/2016-07-30-fix-bug-caused-by-un-synced-time/</guid>
      <description>&lt;p&gt;前段时间遇到一个诡异的bug，后端代码有使用到一个数据服务API，接口有时间戳验证。API服务跑在云服务器上，程序后台跑在本地Ubuntu服务器上。&lt;/p&gt;

&lt;p&gt;两个服务都是我写的，API服务升级了时间戳验证功能后重新部署，本地服务器上的程序后台服务居然挂掉了，开发电脑上各种测试都正常，只好开启调试日志检查。结果发现是本地服务器上时间比API服务的时间快了两分钟多。&lt;/p&gt;

&lt;p&gt;查看服务器配置，发现Ubuntu Server发行版默认居然没有安装NTP服务，Server版居然不开启时间同步服务？？？一万匹草泥马奔腾而过……&lt;/p&gt;

&lt;p&gt;找到问题，解决就简单了，安装NTP服务，顺便把时间服务器配置到国内某云的时间服务器~&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;重点强调&lt;/strong&gt;：部署Server服务器后一定要检查NTP服务起了没？一定要起时间同步服务，并且要配置速度比较快的时间同步服务器。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu 14.04 使用阿里云源</title>
      <link>http://hshsh.me/post/2016-07-30-using-aliyun-mirror-for-ubuntu-14.04/</link>
      <pubDate>Sat, 30 Jul 2016 07:20:00 +0800</pubDate>
      
      <guid>http://hshsh.me/post/2016-07-30-using-aliyun-mirror-for-ubuntu-14.04/</guid>
      <description>&lt;p&gt;Ubuntu的官方源也是慢的不行不行的，怎么办？换阿里云的源，速度杠杠的！&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak  # 备份
sudo vim /etc/apt/sources.list  # 修改配置
sudo apt-get clean &amp;amp;&amp;amp; sudo apt-get update  # 更新列表
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;修改源配置如下：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-txt&#34;&gt;deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse

## Uncomment the following two lines to add software from Canonical&#39;s
## &#39;partner&#39; repository.
## This software is not part of Ubuntu, but is offered by Canonical and the
## respective vendors as a service to Ubuntu users.
# deb http://archive.canonical.com/ubuntu trusty partner
# deb-src http://archive.canonical.com/ubuntu trusty partner

## This software is not part of Ubuntu, but is offered by third-party
## developers who want to ship their latest software.
deb http://extras.ubuntu.com/ubuntu trusty main
deb-src http://extras.ubuntu.com/ubuntu trusty main
deb http://packagecloud.io/grafana/testing/debian/ wheezy main
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu &amp; Linux 常用命令笔记</title>
      <link>http://hshsh.me/post/2016-04-27-ubuntu-linux-shell-commands-notes/</link>
      <pubDate>Wed, 27 Apr 2016 12:00:00 +0800</pubDate>
      
      <guid>http://hshsh.me/post/2016-04-27-ubuntu-linux-shell-commands-notes/</guid>
      <description>

&lt;h2 id=&#34;系统配置&#34;&gt;系统配置&lt;/h2&gt;

&lt;h3 id=&#34;安装-oracle-jdk&#34;&gt;安装 Oracle JDK&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ sudo add-apt-repository ppa:webupd8team/java
$ sudo apt-get update
$ sudo apt-get install oracle-java8-installer
$ sudo apt-get install oracle-java8-set-default
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;永久性修改系统dns&#34;&gt;永久性修改系统DNS&lt;/h3&gt;

&lt;p&gt;编辑&lt;code&gt;/etc/network/interfaces&lt;/code&gt;文件，在最后添加一行：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt;dns-nameservers 8.8.8.8 8.8.4.4
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;或者可以修改&lt;code&gt;/etc/resolvconf/resolv.conf.d/base&lt;/code&gt;文件，默认为空，在其中插入：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt;nameserver 8.8.8.8
nameserver 8.8.4.4
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;如果有多个DNS，就每行添加一个。&lt;/p&gt;

&lt;p&gt;NOTE：亲测，以上设置，需要重启系统后生效！&lt;/p&gt;

&lt;h2 id=&#34;常用命令行工具&#34;&gt;常用命令行工具&lt;/h2&gt;

&lt;h3 id=&#34;查看进程&#34;&gt;查看进程&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ ps ax
$ ps aux
$ ps ax | less
$ ps ax | grep ...
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;查看端口&#34;&gt;查看端口&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ netstat -tap | grep ...
$ netstat -na | grep ...
$ ss -tln | grep ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查看指定进程占用的端口号：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ ps -ef | grep &amp;quot;process name&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;根据进程ID查看招用端口号：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# redhat
$ netstat -nltp | grep pid
# ubuntu
$ netstat -anp | grep pid
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查看占用某个端口的进程：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ lsof -i:port
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;监控日志文件&#34;&gt;监控日志文件&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ tail -f /path/to/file.log
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;重启-x-server&#34;&gt;重启 X Server&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cat /etc/X11/default-display-manager
$ sudo restart {DISPLAY_MANAGER}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;输出重定向&#34;&gt;输出重定向&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ cat foo &amp;gt; foo.txt  # 重定向标准输出到文件
$ cat foo 2&amp;gt; foo.txt  # 重定向错误输出到文件
$ cat foo 2&amp;gt;&amp;amp;1  # 重定向错误输出到标准输出
$ cat foo &amp;gt; foo.txt 2&amp;gt;&amp;amp;1  # 重定向标准输出和错误输出到文件
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;如果要写入的文件权限不够，可以这样（&lt;code&gt;-a&lt;/code&gt;选项表示追加内容到文件）：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ sudo sh -c &amp;quot;echo &#39;xxx&#39;&amp;quot; &amp;gt; /path/to/somefile
$ echo &#39;xxx&#39; | sudo tee -a /path/to/somefile
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Linux常用打包解包命令备忘</title>
      <link>http://hshsh.me/post/2016-04-02-linux-pack-and-unpack/</link>
      <pubDate>Sat, 02 Apr 2016 22:33:15 +0800</pubDate>
      
      <guid>http://hshsh.me/post/2016-04-02-linux-pack-and-unpack/</guid>
      <description>

&lt;h2 id=&#34;tar&#34;&gt;.tar&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;tar cvf file.tar dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;tar xvf filename.tar&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;gz&#34;&gt;.gz&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;gzip dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;gzip -d filename.gz&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;tar-gz&#34;&gt;.tar.gz&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;tar zcvf file.tar.gz dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;tar zxvf file.tar.gz&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;tar-bz2&#34;&gt;.tar.bz2&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;tar jcvf file.tar.bz2 dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;tar jxvf filename.tar.bz2&lt;/code&gt; or &lt;code&gt;tar jxvf filename.tar.bz&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;zip&#34;&gt;.zip&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;zip file.zip dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;unzip filename.zip&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;rar&#34;&gt;.rar&lt;/h2&gt;

&lt;p&gt;安装： &lt;code&gt;sudo apt-get install rar&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;打包： &lt;code&gt;rar e dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;rar a filename.rar&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;z&#34;&gt;.z&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;compress dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;uncompress filename.z&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;tar-z&#34;&gt;.tar.Z&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;tar Zcvf file.tar.Z dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;tar Zxvf filename.tar.Z&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;tgz&#34;&gt;.tgz&lt;/h2&gt;

&lt;p&gt;解包： &lt;code&gt;tar zxvf filename.tgz&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;tar-tgz&#34;&gt;.tar.tgz&lt;/h2&gt;

&lt;p&gt;打包： &lt;code&gt;tar zcvf file.tar.tgz dirname&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;解包： &lt;code&gt;tar zxvf filename.tar.tgz&lt;/code&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>